# Tianchi_O2O_freshman_competition
天池O2O新手赛    AUC=0.7961 排名前段时间有30+，现在估计40+，随着后面越来越多人提交且结果会越来越好，如果不持续做的话排名会掉的

     Data_preprocess.py 数据预处理部分，包括数据集打标和数据集划分;
     feat_section.py    特征区间的特征工程代码
     label_section.py   预测区间的特征工程代码
     time_gap_count.py  预测区间的某些时间差特征和leak特征
     model.py           xgb,lgb模型训练和使用RFE做特征选择

## 一.数据集划分
   使用时间窗口划分法划分数据
   
   | |特征区间|预测区间|
   |:---|:---|:---|
   |测试集|20160501~20160630|20160701~20160731|
   |训练集|20160401~20160531|20160601~20160630|
   |验证集|20160301~20160430|20160501~20160530|
   
   其中训练集与线下验证集可以做交叉验证。最后对测试集做预测时，将训练集与验证集合并一起预测
   
 ## 二.特征工程
   特征工程的重点是构建用户，商家，优惠券三大特征群，以及 用户-商家，用户-优惠券，商家-优惠券 三个交叉特征群。
   每个特征群主要特征有：
   
   统计特征（最大/最小/平均值/比率 等）
   排序特征（各个实体对时间，距离，折扣率等的排序）
   时间特征（日期，时间差等）
   
   预测区间的特征特征区间的特征的相关性较强，因为对于此类时间序列相关的问题，越靠近预测时间，特征的相关性越强，并且，预测区间还有leakage特征可以用来上分，即使用未来的数据。当然，仅限于比赛使用，实际业务中是无法使用的。
   
## 三.模型训练
   模型主要是使用lgb模型，较快，大概5分钟。xgboost的精度较高，但是训练时间太长，大概30+分钟.
   
